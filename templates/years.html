{% extends "base.html" %}
{% block title %}運用年数を求める | 金融電卓{% endblock %}
{% block content %}
  <h2 class="mb-3">目標達成までの必要年数</h2>
  <form method="POST" class="row g-3">
    <div class="col-md-6">
      <label class="form-label">目標の将来価値（円）</label>
      <input type="text" name="target_fv" class="form-control" placeholder="10,000,000" value="{{ request.form.target_fv or '' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">現在貯蓄額（円）</label>
      <input type="text" name="pv" class="form-control" placeholder="1,000,000" value="{{ request.form.pv or '' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">毎月の積立額（円）</label>
      <input type="text" name="pmt" class="form-control" placeholder="30,000" value="{{ request.form.pmt or '' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">年率（%）</label>
      <input type="number" step="0.01" name="annual" class="form-control" placeholder="3" value="{{ request.form.annual or '' }}">
      <div class="form-text">月複利で計算します。</div>
    </div>
    <div class="col-md-12">
      <label class="form-label me-3">積立タイミング</label>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="due" id="due_end" value="end" {% if not request.form.due or request.form.due == 'end' %}checked{% endif %}>
        <label class="form-check-label" for="due_end">月末（後払い）</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="due" id="due_begin" value="begin" {% if request.form.due == 'begin' %}checked{% endif %}>
        <label class="form-check-label" for="due_begin">月初（先払い）</label>
      </div>
    </div>
    <div class="col-12 d-flex gap-2">
      <button class="btn btn-primary" type="submit">計算</button>
      <a class="btn btn-outline-secondary" href="{{ url_for('home') }}">トップへ</a>
    </div>
  </form>

  {% if result %}
  <hr class="my-4">
  <h3 class="h5">結果</h3>
  <ul class="list-group">
    <li class="list-group-item d-flex justify-content-between align-items-center">
      必要期間（年）
      <span class="badge bg-primary rounded-pill">{{ "{:,.3f}".format(result.years) }} 年</span>
    </li>
    <li class="list-group-item">必要期間（月）：{{ result.months }} ヶ月</li>
  </ul>
  {% endif %}
{% endblock %}